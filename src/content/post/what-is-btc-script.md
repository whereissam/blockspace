---
publishDate: 2024-03-11T00:00:00Z
author: Sam
title: 從 BTC 腳本開始的歷史之旅 - 0
excerpt: 這篇文章將介紹比特幣背後是怎麼運作的，為什麼會影響到現在 L2 發展
image: https://replicate.delivery/pbxt/2mc1cS5IS8rMKZVhbxP3wYJttPXMbsehZS10SyIQdxMtfLfkA/out-0.png
category: Blockchain
tags:
  - 比特幣
  - BTC
  - 比特幣系列
metadata:
  canonical: https://astrowind.vercel.app/astrowind-template-in-depth
---

## 背景補充

比特幣做交易的時候，每一筆交易都擁有至少一個輸入（TxIn）和至少一個輸出（TxOut），他們不是直接使用數字的方式顯示，而是一個「腳本」的形式存在

## 什麼是 BTC 腳本

BTC 腳本是比特幣交易中的一種特殊數據結構 - [堆疊](https://surreal.tw/program/note/stack)，用於定義交易的執行條件。它是一種簡單的編程語言，可以用於為比特幣交易添加條件和限制。例如，腳本可用於要求多個簽名才能使交易有效，或建立時間鎖定交易。

BTC 腳本由一系列操作碼組成，每個操作碼代表一個特定操作。操作碼可以分為以下幾類：
- 堆疊操作碼（stack operation code）： 這些操作碼用於操作堆疊，例如加減乘除，從而實現各種各樣的交易條件
- 控制流操作碼 (control flow operation code)： 這些操作碼用於控制腳本的執行順序。
- 加密操作碼 (cryptographic operation code)： 這些操作碼用於進行加密操作。

![image](https://hackmd.io/_uploads/HyGSgB6_p.png)
```
- xyz 為堆疊操作碼
- md5 hasher 為加密操作碼
- check if equal 為控制流操作碼
- d...e 為要驗證的東西
```
### BTC 交易過程

1. 發件人創建一個交易，該交易指定要發送的比特幣數量以及接收者的地址
2. 發件人使用他們的私鑰簽署交易
3. 交易被廣播到比特幣網路
4. 節點驗證交易是否有效
5. 如果交易有效，則將其添加到區塊鏈中
6. 收件人可以使用他們的私鑰來解鎖交易並花費比特幣

### BTC 腳本的執行過程
1. 腳本中的操作碼被逐個讀取
2. 對於每個操作碼，都會執行相應的操作
3. 如果腳本執行成功，則交易將被驗證

## 為什麼 BTC 腳本很重要

因為它允許用戶定義交易的執行條件。這可以提高比特幣的安全性、靈活性和可擴展性。
1. 支出控制：它們定義了比特幣的支出條件。這允許比簡單地將比特幣從一個地址發送到另一個地址更複雜的交易。例如，可以設定需要多方批准支出的多重簽名交易，或建立時間鎖定交易，在特定日期之前無法存取比特幣
2. 啟用功能：比特幣腳本允許在比特幣網路之上創建新功能。例如，彩色硬幣代表現實世界的資產，例如區塊鏈上的忠誠度積分或黃金，它們依賴比特幣腳本來運行
3. 安全性：由於腳本決定了交易的驗證方式，因此它們在保護比特幣網路方面發揮著至關重要的作用。透過精心設計腳本邏輯，開發人員可以確保只處理授權的交易

> BTC 腳本不是智能合約，但它可以用來實現簡單的智能合約，例如加減乘除

BTC 腳本的優點包括：
- 安全性： BTC 腳本經過精心設計，以防止雙重支付和其他攻擊
- 靈活性： BTC 腳本可以用於實現各種各樣的交易條件
- 可擴展性： BTC 腳本可以擴展以支持新的功能

BTC 腳本的應用包括：
- 多重簽名： 多重簽名交易要求多個方簽署交易才能使其有效。這可以提高安全性，因為它可以防止任何一方單獨花費資金
- 時間鎖定交易： 時間鎖定交易指定交易只能在特定時間之後才能進行。這可以用於創建期貨合約或其他時間敏感的交易
- 智能合約： BTC 腳本可以用於在比特幣區塊鏈上創建簡單的智能合約

## BTC 腳本的局限性包括：
- 複雜性： BTC 腳本的編程難度較高
- 可擴展性： BTC 腳本的擴展性有限
- 圖靈不完備 : 不能執行某些特定的計算任務，例如 BTC 腳本不能計算任意長度的數據的哈希值，因此開發上會有很大的限制

### 圖靈不完備

圖靈完備性是一種計算機科學概念，它描述了一種系統的能力來計算任何可以用圖靈機計算的函數。圖靈機是一種抽象的計算模型，它可以用來描述任何可以進行計算的設備。

BTC 腳本是圖靈不完備的，因為它不能執行某些特定的計算任務。

BTC 腳本的圖靈不完備性是故意的。BTC 腳本的設計目的是提高安全性並防止攻擊。如果 BTC 腳本是圖靈完備的，則可能存在可能被利用的漏洞。BTC 腳本的圖靈不完備性也意味著它不能用於實現某些類型的智能合約，像是在以太坊上面各種複雜的操作，儘管 BTC 腳本是圖靈不完備的，但它仍然是一種強大的工具，可用於實現各種各樣的交易條件。